<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Virtio Vhost Backend Drivers"><meta name="keywords" content="rust, rustlang, rust-lang, vmm_vhost"><title>vmm_vhost - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../vmm_vhost/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate vmm_vhost</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.1.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all vmm_vhost's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="vmm_vhost" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">vmm_vhost</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/vmm_vhost/lib.rs.html#4-497" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Virtio Vhost Backend Drivers</p>
<p>Virtio devices use virtqueues to transport data efficiently. The first generation of virtqueue
is a set of three different single-producer, single-consumer ring structures designed to store
generic scatter-gather I/O. The virtio specification 1.1 introduces an alternative compact
virtqueue layout named “Packed Virtqueue”, which is more friendly to memory cache system and
hardware implemented virtio devices. The packed virtqueue uses read-write memory, that means
the memory will be both read and written by both host and guest. The new Packed Virtqueue is
preferred for performance.</p>
<p>Vhost is a mechanism to improve performance of Virtio devices by delegate data plane operations
to dedicated IO service processes. Only the configuration, I/O submission notification, and I/O
completion interruption are piped through the hypervisor.
It uses the same virtqueue layout as Virtio to allow Vhost devices to be mapped directly to
Virtio devices. This allows a Vhost device to be accessed directly by a guest OS inside a
hypervisor process with an existing Virtio (PCI) driver.</p>
<p>The initial vhost implementation is a part of the Linux kernel and uses ioctl interface to
communicate with userspace applications. Dedicated kernel worker threads are created to handle
IO requests from the guest.</p>
<p>Later Vhost-user protocol is introduced to complement the ioctl interface used to control the
vhost implementation in the Linux kernel. It implements the control plane needed to establish
virtqueues sharing with a user space process on the same host. It uses communication over a
Unix domain socket to share file descriptors in the ancillary data of the message.
The protocol defines 2 sides of the communication, master and slave. Master is the application
that shares its virtqueues. Slave is the consumer of the virtqueues. Master and slave can be
either a client (i.e. connecting) or server (listening) in the socket communication.</p>
</div></details><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="mod" href="connection/index.html" title="vmm_vhost::connection mod">connection</a></div><div class="item-right docblock-short"><p>Common data structures for listener and endpoint.</p>
</div><div class="item-left module-item"><a class="mod" href="message/index.html" title="vmm_vhost::message mod">message</a></div><div class="item-right docblock-short"><p>Define communication messages for the vhost-user protocol.</p>
</div></div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="struct" href="struct.Master.html" title="vmm_vhost::Master struct">Master</a></div><div class="item-right docblock-short"><p>Struct for the vhost-user master endpoint.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.MasterReqHandler.html" title="vmm_vhost::MasterReqHandler struct">MasterReqHandler</a></div><div class="item-right docblock-short"><p>Server to handle service requests from slaves from the slave communication channel.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.SlaveFsCacheReq.html" title="vmm_vhost::SlaveFsCacheReq struct">SlaveFsCacheReq</a></div><div class="item-right docblock-short"><p>Request proxy to send vhost-user-fs slave requests to the master through the slave
communication channel.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.SlaveListener.html" title="vmm_vhost::SlaveListener struct">SlaveListener</a></div><div class="item-right docblock-short"><p>Vhost-user slave side connection listener.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.SlaveReqHandler.html" title="vmm_vhost::SlaveReqHandler struct">SlaveReqHandler</a></div><div class="item-right docblock-short"><p>Server to handle service requests from masters from the master communication channel.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.SlaveReqHelper.html" title="vmm_vhost::SlaveReqHelper struct">SlaveReqHelper</a></div><div class="item-right docblock-short"><p>Abstracts |Endpoint| related operations for vhost-user slave implementations.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.VhostUserMemoryRegionInfo.html" title="vmm_vhost::VhostUserMemoryRegionInfo struct">VhostUserMemoryRegionInfo</a></div><div class="item-right docblock-short"><p>Memory region configuration data.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.VringConfigData.html" title="vmm_vhost::VringConfigData struct">VringConfigData</a></div><div class="item-right docblock-short"><p>Vring configuration data.</p>
</div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="vmm_vhost::Error enum">Error</a></div><div class="item-right docblock-short"><p>Errors for vhost-user operations</p>
</div><div class="item-left module-item"><a class="enum" href="enum.Protocol.html" title="vmm_vhost::Protocol enum">Protocol</a></div><div class="item-right docblock-short"><p>Vhost-user protocol variants used for the communication.</p>
</div></div><h2 id="constants" class="section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="constant" href="constant.VHOST_MAX_MEMORY_REGIONS.html" title="vmm_vhost::VHOST_MAX_MEMORY_REGIONS constant">VHOST_MAX_MEMORY_REGIONS</a></div><div class="item-right docblock-short"><p>Maximum number of memory regions supported.</p>
</div></div><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="trait" href="trait.VhostBackend.html" title="vmm_vhost::VhostBackend trait">VhostBackend</a></div><div class="item-right docblock-short"><p>An interface for setting up vhost-based backend drivers with interior mutability.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.VhostBackendMut.html" title="vmm_vhost::VhostBackendMut trait">VhostBackendMut</a></div><div class="item-right docblock-short"><p>An interface for setting up vhost-based backend drivers.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.VhostUserMaster.html" title="vmm_vhost::VhostUserMaster trait">VhostUserMaster</a></div><div class="item-right docblock-short"><p>Trait for vhost-user master to provide extra methods not covered by the VhostBackend yet.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.VhostUserMasterReqHandler.html" title="vmm_vhost::VhostUserMasterReqHandler trait">VhostUserMasterReqHandler</a></div><div class="item-right docblock-short"><p>Define services provided by masters for the slave communication channel.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.VhostUserMasterReqHandlerMut.html" title="vmm_vhost::VhostUserMasterReqHandlerMut trait">VhostUserMasterReqHandlerMut</a></div><div class="item-right docblock-short"><p>A helper trait mirroring <a href="trait.VhostUserMasterReqHandler.html">VhostUserMasterReqHandler</a> but without interior mutability.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.VhostUserSlaveReqHandler.html" title="vmm_vhost::VhostUserSlaveReqHandler trait">VhostUserSlaveReqHandler</a></div><div class="item-right docblock-short"><p>Services provided to the master by the slave with interior mutability.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.VhostUserSlaveReqHandlerMut.html" title="vmm_vhost::VhostUserSlaveReqHandlerMut trait">VhostUserSlaveReqHandlerMut</a></div><div class="item-right docblock-short"><p>Services provided to the master by the slave without interior mutability.</p>
</div></div><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="type" href="type.HandlerResult.html" title="vmm_vhost::HandlerResult type">HandlerResult</a></div><div class="item-right docblock-short"><p>Result of request handler.</p>
</div><div class="item-left module-item"><a class="type" href="type.Result.html" title="vmm_vhost::Result type">Result</a></div><div class="item-right docblock-short"><p>Result of vhost-user operations</p>
</div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="vmm_vhost" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>